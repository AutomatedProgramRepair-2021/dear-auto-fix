#Defects4J integration

Each script in this directory builds upon or extends Defects4J. This means that
the environment variable D4J_HOME needs to be exported; it must point to the
root directory of the Defects4J installation.

# High-level summary
This summary indicates the purpose of each script.  Each script
provides a header with more detailed usage information and requirements.


### Analyzing Defects4J patches
* `categorize_patches.sh`: Categorize each defect in Defects4J (based on its
                           bug-fixing patch) into:
    * single-line fault
    * fault of omission
    * fault in non-executable code

* `get_buggy_lines.sh`: Determine all buggy source code lines in a buggy
                        Defects4J project version (i.e., all *modified* or *removed*
                        source code lines in the buggy project version).

* `get_fixed_lines.sh`: Determine all fixed source code lines in a fixed
                        Defects4J project version (i.e., all *modified* or *added*
                        source code lines in the fixed project version).

* `view_patch.pl`: Visualize the bug-fixing patch of a Defects4J defect, in
                   a visual diff editor.

### Artificial faults
* `get_killable_mutants_in_scope.sh`: Determine, for a given real fault in
                                      Defects4J, all mutants that are within
                                      scope of the real fault AND detected by
                                      the developer-written test suite.

* `list_all_artificial_faults.sh`: List all files related to artificial faults
                                   in a Defects4J repository that is populated
                                   with artificial faults.

* `mutants_in_scope.py`: Determine all mutants (artificial faults) within a
                         given scope of statements.

* `populate_d4j.sh`: Populate Defects4J's database with artificial faults.

* `avoid_if_true_optimization.py`:
    Modify Defects4J's patches so that conditions like `if (true)` won't get
    optimized away by the compiler (and therefore become invisible to GZoltar).
    All the changes this script makes are very, very likely to be necessary;
    therefore, they don't need to be reviewed by a human.

    However, this script won't make all the necessary tweaks; therefore, we need...

* `propose_if_true_optimization_workarounds.sh`:
    Like `avoid_if_true_optimization.py`, but makes many more tweaks, most of which
    are not necessary. A human should review its changes and selectively staged
    for commit.

### Test generation
* `analyze_flaky_tests.sh`: Helper script to analyze flaky tests generated by Randoop.

* `check_fp.pl`: Helper script to check whether a fault-triggering test suite is
                 a false positive.

